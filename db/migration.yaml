description: This file contains the migration steps for the database schema.
plan:
  - id: 01J6EWQ9NQRBQA3GT3FTCSRPJN
    description: Create Users table
    up:
      - | # sql
        CREATE TABLE users (name VARCHAR(50));

      - | # sql
        CREATE INDEX idx_users_name ON users (name);

    down:
      - | # sql
        DROP INDEX idx_users_name;

      - | # sql
        DROP TABLE users;

  - id: 01J6EWQ9NQRBQA3GT3FTCSRPJN
    description: Create Projects table
    up:
      - | # sql
        CREATE TABLE projects (name VARCHAR(50));

      - | # sql
        CREATE INDEX idx_projects_name ON projects (name);

    down:
      - | # sql
        DROP INDEX idx_projects_name;

      - | # sql
        DROP TABLE projects;

  - id: 01J6PQ201YECE9R5XYTVWCRJC1
    description: Populate users table
    up:
      - | # sql
        INSERT INTO users (name) VALUES ('Alice');

      - | # sql
        SELECT COUNT(name) FROM users;

      - | # sql
        SELECT table_name
        FROM information_schema.tables
        WHERE table_schema = 'public'
          AND table_type = 'BASE TABLE';

    down: []
